---
import { getCollection } from "astro:content";

const url = Astro.url;
const [, locale] = url.pathname.split("/");

const allPages = await getCollection("pages", (page) => {
  const [pageLocale] = page.id.split("/");
  if (pageLocale == locale && page.data.sitemap) {
    return page;
  }
});

const sortedPages = allPages.sort(
  (a, b) => a.data.menuOrder - b.data.menuOrder
);
---

<nav>
  <ul class="flex gap-x-8">
    {
      sortedPages.map((page) => {
        return (
          <li>
            <a
              href={`/${page.slug}/`}
              rel="prefetch"
              class="font-bebas tracking-widest text-xl"
            >
              {page.data.title}
            </a>
          </li>
        );
      })
    }
  </ul>
</nav>
